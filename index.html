<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Omeglo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>

<style>
body { margin:0; font-family:Arial; background:#0e0f13; color:#fff }
header { background:#4f46e5; padding:12px; font-size:18px }
#center { height:90vh; display:flex; justify-content:center; align-items:center }
.box { background:#111; padding:30px; border:1px solid #333; width:300px }
button { width:100%; padding:10px; margin-top:10px }
</style>
</head>

<body>

<header>
  Omeglo | Online: <span id="online">0</span>
</header>

<div id="center">
  <div class="box">
    <input id="interest" placeholder="Interests (optional)" style="width:100%;padding:8px">
    <button onclick="start()">Start Chat</button>
    <p id="status">Connecting…</p>
  </div>
</div>

<script>
const socket = io({
  path: "/socket.io",
  transports: ["websocket"]
});

const online = document.getElementById("online");
const statusEl = document.getElementById("status");

socket.on("connect", () => {
  console.log("CONNECTED", socket.id);
});

socket.on("online-count", (n) => {
  console.log("ONLINE:", n);
  online.innerText = n;
});

socket.on("matched", () => {
  statusEl.innerText = "Matched with stranger";
});

function start() {
  statusEl.innerText = "Finding stranger…";
  socket.emit("join");
}
</script>

</body>
</html>
